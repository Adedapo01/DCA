
SHELL          = /bin/bash
SRC_DIR        = ../../src
MAGMA_ROOT_DIR = MACHINE_MAGMA_ROOT_DIR

LIBS___DIR = ../../libs
FFTW___DIR = ../../libs/fftw-3.3.3
NFFT___DIR = ../../libs/nfft-3.1.3
HDF5___DIR = ../../libs/hdf5-1.8.11
SPGLIB_DIR = ../../libs/spglib-1.4.1
MPICH__DIR = ../../libs/mpich-3.0.4

COMP_DIR = ../../src/comp_libraries
MATH_DIR = ../../src/math_algorithms
PHYS_DIR = ../../src/phys_algorithms/DCA+

INCLUDES =  -I. \
	-I$(FFTW___DIR)/build/include \
	-I$(FFTW___DIR)/build/lib \
	-I$(NFFT___DIR)/build/include \
	-I$(NFFT___DIR)/build/lib \
	-I$(HDF5___DIR)/build/include \
	-I$(HDF5___DIR)/build/lib \
	-I$(MPICH__DIR)/build/include \
	-I$(MPICH__DIR)/build/lib \
	-I$(SPGLIB_DIR)/build/include/spglib \
	-I$(SRC_DIR) \
	-I$(SRC_DIR)/comp_library/JSON \
	-I$(SRC_DIR)/comp_library/JSON/JsonParser \
	-I$(SRC_DIR)/comp_library/IO_operations \
	-I$(SRC_DIR)/comp_library/IO_operations/CSV \
	-I$(SRC_DIR)/comp_library/profiler_library \
	-I$(SRC_DIR)/comp_library/profiler_library/events \
	-I$(SRC_DIR)/comp_library/profiler_library/profilers \
	-I$(SRC_DIR)/comp_library/parallelization_library/ \
	-I$(SRC_DIR)/comp_library/parallelization_library/interfaces\
	-I$(SRC_DIR)/comp_library/type_list \
	-I$(SRC_DIR)/comp_library/generic_methods_library \
	-I$(SRC_DIR)/LAPACK_PLANS \
	-I$(SRC_DIR)/LAPACK_PLANS/BLAS \
	-I$(SRC_DIR)/LAPACK_PLANS/CUBLAS \
	-I$(SRC_DIR)/LAPACK_PLANS/LAPACK \
	-I$(SRC_DIR)/LAPACK_PLANS/LAPACK/eigensystem_plans \
	-I$(SRC_DIR)/LAPACK_PLANS/LAPACK/gelss_plans \
	-I$(SRC_DIR)/LAPACK_PLANS/LAPACK/geqr_plans \
	-I$(SRC_DIR)/LAPACK_PLANS/MAGMA \
	-I$(SRC_DIR)/LAPACK_PLANS/BLAS_BLOCK_MATRICES \
	-I$(SRC_DIR)/LAPACK_PLANS/LINEAR_ALGEBRA_PLANS \
	-I$(SRC_DIR)/comp_library/LIN_ALG \
	-I$(SRC_DIR)/comp_library/LIN_ALG/src \
	-I$(SRC_DIR)/comp_library/LIN_ALG/src/linalg_operations \
	-I$(SRC_DIR)/comp_library/LIN_ALG/src/linalg_structures \
	-I$(SRC_DIR)/comp_library/IO_library/ \
	-I$(SRC_DIR)/comp_library/IO_library/CSV \
	-I$(SRC_DIR)/comp_library/IO_library/HDF5 \
	-I$(SRC_DIR)/comp_library/IO_library/JSON \
	-I$(SRC_DIR)/comp_library/IO_library/JSON/JSON_PARSER \
	-I$(SRC_DIR)/comp_library/function_library\
	-I$(SRC_DIR)/comp_library/function_library/function_operations \
	-I$(SRC_DIR)/comp_library/function_library/domains \
	-I$(SRC_DIR)/comp_library/function_library/domains/special_domains \
	-I$(SRC_DIR)/comp_library/function_library/domains/product_domains \
	-I$(SRC_DIR)/comp_library/function_library/domains/union_domains \
	-I$(SRC_DIR)/comp_library/function_plotting \
	-I$(SRC_DIR)/comp_library/function_plotting/gnuplot \
	-I$(SRC_DIR)/math_library \
	-I$(SRC_DIR)/math_library/statistics \
	-I$(SRC_DIR)/math_library/random_number_library/ \
	-I$(SRC_DIR)/math_library/geometry_library \
	-I$(SRC_DIR)/math_library/geometry_library/vector_operations \
	-I$(SRC_DIR)/math_library/geometry_library/tetrahedron_mesh/ \
	-I$(SRC_DIR)/math_library/geometry_library/tetrahedron_mesh/tetrahedron_implementation \
	-I$(SRC_DIR)/math_library/geometry_library/tetrahedron_mesh/tetrahedron_mesh_implementation \
	-I$(SRC_DIR)/math_library/geometry_library/gaussian_quadrature \
	-I$(SRC_DIR)/math_library/functional_transforms/ \
	-I$(SRC_DIR)/math_library/functional_transforms/domain_specifications \
	-I$(SRC_DIR)/math_library/functional_transforms/basis_functions \
	-I$(SRC_DIR)/math_library/functional_transforms/basis_functions/hermite_splines \
	-I$(SRC_DIR)/math_library/functional_transforms/basis_transforms \
	-I$(SRC_DIR)/math_library/functional_transforms/domain_transforms \
	-I$(SRC_DIR)/math_library/functional_transforms/function_transforms \
	-I$(SRC_DIR)/math_library/inference_library/ \
	-I$(SRC_DIR)/math_library/interpolation_library/ \
	-I$(SRC_DIR)/math_library/gaussian_processes \
	-I$(SRC_DIR)/math_library/gaussian_processes/covariance_function \
	-I$(SRC_DIR)/math_library/FFT_and_NFFT/ \
	-I$(SRC_DIR)/math_library/FFT_and_NFFT/NFFT/ \
	-I$(SRC_DIR)/math_library/FFT_and_NFFT/NFFT/domains/ \
	-I$(SRC_DIR)/math_library/FFT_and_NFFT/NFFT/basis_functions/ \
	-I$(SRC_DIR)/math_library/FFT_and_NFFT/NFFT/atomic_convolutions/ \
	-I$(SRC_DIR)/algorithms \
	-I$(SRC_DIR)/algorithms/compute_DOS \
	-I$(SRC_DIR)/algorithms/compute_Fermi_surface \
	-I$(SRC_DIR)/algorithms/Bsplines \
	-I$(SRC_DIR)/algorithms/Bsplines/uniform \
	-I$(SRC_DIR)/algorithms/simple_algorithms \
	-I$(SRC_DIR)/algorithms/fourier_transform \
	-I$(SRC_DIR)/algorithms/fourier_transform/FT_type_2_type \
	-I$(SRC_DIR)/algorithms/legendre_transform \
	-I$(SRC_DIR)/algorithms/legendre_transform/legendre_transformation_kernel \
	-I$(SRC_DIR)/algorithms/generic_assert \
	-I$(SRC_DIR)/algorithms/concepts \
	-I$(SRC_DIR)/algorithms/cluster_operations \
	-I$(SRC_DIR)/algorithms/interpolation \
	-I$(SRC_DIR)/algorithms/interpolation/extended_interpolation_domains \
	-I$(SRC_DIR)/algorithms/interpolation/bspline_interpolation_kernel \
	-I$(SRC_DIR)/algorithms/interpolation/hspline_interpolation_kernel \
	-I$(SRC_DIR)/algorithms/interpolation/lspline_interpolation_kernel \
	-I$(SRC_DIR)/algorithms/interpolation/linear_interpolation_kernel \
	-I$(SRC_DIR)/algorithms/interpolation/rbf_interpolation_kernel \
	-I$(SRC_DIR)/algorithms/interpolation/wannier_interpolation_kernel \
	-I$(SRC_DIR)/algorithms/interpolation/projection_kernel \
	-I$(SRC_DIR)/algorithms/smooth_algorithms \
	-I$(SRC_DIR)/algorithms/integration \
	-I$(SRC_DIR)/algorithms/integration/inner_product_kernels \
	-I$(SRC_DIR)/algorithms/coarsegrain \
	-I$(SRC_DIR)/algorithms/coarsegrain/delta_function_integration \
	-I$(SRC_DIR)/algorithms/coarsegrain/delta_function_integration/implementation \
	-I$(SRC_DIR)/algorithms/coarsegrain/isolated_cluster_integration \
	-I$(SRC_DIR)/algorithms/coarsegrain/isolated_cluster_integration/implementation \
	-I$(SRC_DIR)/algorithms/coarsegrain/trapezium_integration \
	-I$(SRC_DIR)/algorithms/coarsegrain/trapezium_integration/implementation \
	-I$(SRC_DIR)/algorithms/coarsegrain/quadrature_integration \
	-I$(SRC_DIR)/algorithms/coarsegrain/quadrature_integration/quadrature_domains \
	-I$(SRC_DIR)/algorithms/coarsegrain/quadrature_integration/quadrature_algorithms \
	-I$(SRC_DIR)/algorithms/coarsegrain/quadrature_integration/quadrature_implementation \
	-I$(SRC_DIR)/algorithms/coarsegrain/tetrahedron_integration \
	-I$(SRC_DIR)/algorithms/coarsegrain/tetrahedron_integration/implementation \
	-I$(SRC_DIR)/algorithms/coarsegrain_inversion \
	-I$(SRC_DIR)/algorithms/coarsegrain_inversion/deconvolute \
	-I$(SRC_DIR)/algorithms/do_cast \
	-I$(SRC_DIR)/algorithms/mesh \
	-I$(SRC_DIR)/algorithms/mesh/delta_function_mesh/ \
	-I$(SRC_DIR)/algorithms/mesh/tetrahedron_mesh/ \
	-I$(SRC_DIR)/algorithms/mesh/tetrahedron_mesh/tetrahedron_mesh_implementation \
	-I$(SRC_DIR)/algorithms/mesh/tetrahedron_mesh/tetrahedron_implementation \
	-I$(SRC_DIR)/algorithms/random_numbers \
	-I$(SRC_DIR)/algorithms/statistics \
	-I$(SRC_DIR)/algorithms/provenance \
	-I$(SRC_DIR)/algorithms/pade \
	-I$(SRC_DIR)/algorithms/pade/basis_functions \
	-I$(SRC_DIR)/algorithms/pade/gradient_method \
	-I$(SRC_DIR)/algorithms/pade/levmar_method \
	-I$(SRC_DIR)/algorithms/pade/conjugate_gradient_method \
	-I$(SRC_DIR)/algorithms/print_data \
	-I$(SRC_DIR)/algorithms/profilers \
	-I$(SRC_DIR)/algorithms/profilers/profilers \
	-I$(SRC_DIR)/algorithms/profilers/events \
	-I$(SRC_DIR)/algorithms/symmetrization \
	-I$(SRC_DIR)/algorithms/compute_moments \
	-I$(SRC_DIR)/algorithms/compute_band_structure \
	-I$(SRC_DIR)/algorithms/compute_chemical_potential \
	-I$(SRC_DIR)/algorithms/Newton_Rapson \
	-I$(SRC_DIR)/phys_library/domains/ \
	-I$(SRC_DIR)/phys_library/domains/cluster \
	-I$(SRC_DIR)/phys_library/domains/cluster/interpolation \
	-I$(SRC_DIR)/phys_library/domains/cluster/interpolation/wannier_interpolation_kernel \
	-I$(SRC_DIR)/phys_library/domains/cluster/interpolation/hspline_interpolation_kernel \
	-I$(SRC_DIR)/phys_library/domains/cluster/symmetries \
	-I$(SRC_DIR)/phys_library/domains/cluster/symmetries/point_groups \
	-I$(SRC_DIR)/phys_library/domains/cluster/symmetries/point_groups/2D \
	-I$(SRC_DIR)/phys_library/domains/cluster/symmetries/point_groups/3D \
	-I$(SRC_DIR)/phys_library/domains/cluster/symmetries/symmetry_operations \
	-I$(SRC_DIR)/phys_library/domains/cluster/symmetries/symmetry_operations/trigoniometric_ops \
	-I$(SRC_DIR)/phys_library/domains/cluster/symmetries/symmetry_operations/2D \
	-I$(SRC_DIR)/phys_library/domains/cluster/symmetries/symmetry_operations/3D \
	-I$(SRC_DIR)/phys_library/domains/cluster/symmetrization_algorithms \
	-I$(SRC_DIR)/phys_library/domains/time_and_frequency \
	-I$(SRC_DIR)/phys_library/domains/Quantum_domain \
	-I$(SRC_DIR)/phys_library/domains/Quantum_domain/Brillouin_zone_cut \
	-I$(SRC_DIR)/phys_library/parameters \
	-I$(SRC_DIR)/phys_library/parameters/parameters_specialization \
	-I$(SRC_DIR)/phys_library/parameters/parameters_specialization/templates \
	-I$(SRC_DIR)/phys_library/parameters/parameters_specialization/specializations \
	-I$(SRC_DIR)/phys_library/parameters/models \
	-I$(SRC_DIR)/phys_library/parameters/models/analytic_Hamiltonians \
	-I$(SRC_DIR)/phys_library/parameters/models/analytic_Hamiltonians/lattices \
	-I$(SRC_DIR)/phys_library/parameters/models/analytic_Hamiltonians/interactions \
	-I$(SRC_DIR)/phys_library/parameters/models/material_Hamiltonians \
	-I$(SRC_DIR)/phys_library/parameters/models/material_Hamiltonians/template_specialization_NiO \
	-I$(SRC_DIR)/phys_library/parameters/models/material_Hamiltonians/template_specialization_CuO2 \
	-I$(SRC_DIR)/phys_library/parameters/models/DFT_Hamiltonians \
	-I$(SRC_DIR)/phys_library/parameters/models/lattice_parameters \
	-I$(SRC_DIR)/phys_library/DCA+_loop \
	-I$(SRC_DIR)/phys_library/DCA+_data \
	-I$(SRC_DIR)/phys_library/DCA+_algorithms/ \
	-I$(SRC_DIR)/phys_library/DCA+_algorithms/compute_band_structure \
	-I$(SRC_DIR)/phys_library/DCA+_step/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/interpolation \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_mapping \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_mapping/coarsegraining_step \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_series_expansion \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_series_expansion/series_expansion \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_exact_diagonalization \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_exact_diagonalization_advanced \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_template \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_pthread_jacket \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_domains \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_structs \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker/ctaux_walker_tools/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker/ctaux_walker_tools/ctaux_shrink_routines/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker/ctaux_walker_tools/ctaux_N_matrix_routines/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker/ctaux_walker_tools/ctaux_G_matrix_routines/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker/ctaux_walker_tools/ctaux_G0_matrix_routines/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_accumulator/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_accumulator/sp_accumulator/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_accumulator/tp_accumulator/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_ss_hybridization \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_ss_hybridization/ss_hybridization_structures \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_ss_hybridization/ss_hybridization_walker_bit \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_ss_hybridization/ss_hybridization_walker_tools \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_ss_hybridization/ss_hybridization_accumulator/sp_accumulator \
	-I$(SRC_DIR)/phys_library/DCA+_step/lattice_mapping \
	-I$(SRC_DIR)/phys_library/DCA+_step/lattice_mapping/interpolation \
	-I$(SRC_DIR)/phys_library/DCA+_step/lattice_mapping/deconvolution \
	-I$(SRC_DIR)/phys_library/DCA+_step/symmetrization \
	-I$(SRC_DIR)/phys_library/DCA+_analysis/ \
	-I$(SRC_DIR)/phys_library/DCA+_analysis/analysis \
	-I$(SRC_DIR)/phys_library/DCA+_analysis/analysis/TOOLS \
	-I$(SRC_DIR)/phys_library/DCA+_analysis/BSE_solver \
	-I$(SRC_DIR)/phys_library/DCA+_analysis/BSE_solver/domains \
	-I$(SRC_DIR)/phys_library/DCA+_analysis/CPE_solver \
	-I$(SRC_DIR)/phys_library/DCA+_analysis/CPE_solver/basis_functions \
	-I$(SRC_DIR)/phys_library/DCA+_analysis/CPE_solver/gradient_method \
	-I$(SRC_DIR)/MultiOrbitalMultiSite \
	-I$(SRC_DIR)/MonteCarloIntegrator \
	-I$(SRC_DIR)/MonteCarloIntegrator/templates \
	-I$(SRC_DIR)/MonteCarloIntegrator/templates_posix_threads \
	-I$(SRC_DIR)/MonteCarloIntegrator/QMC_matrices \
	-I$(SRC_DIR)/MonteCarloIntegrator/QMC_cached_plans \
	-I$(SRC_DIR)/MonteCarloIntegrator/QMC_cached_plans/basis_functions \
	-I$(SRC_DIR)/MonteCarloIntegrator/QMC_cached_plans/atomic_convolutions \
	-I$(SRC_DIR)/MonteCarloIntegrator/QMC_cached_plans/domains_and_structures \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_WALKER \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_WALKER/TOOLS \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_WALKER/TOOLS/N_MATRIX_TOOLS \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_WALKER/TOOLS/G_MATRIX_TOOLS \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_WALKER/TOOLS/GAMMA_MATRIX_TOOLS \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_WALKER/TOOLS/G0_INTERPOLATION \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_WALKER/TOOLS/SHRINK_TOOLS \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_ACCUMULATOR \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_ACCUMULATOR/SINGLE_PARTICLE \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_ACCUMULATOR/TWO_PARTICLE \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_STRUCTURES \
	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/STRUCTURES \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_expansion \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_expansion/ACCUMULATOR \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_expansion/ACCUMULATOR/SINGLE_PARTICLE \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_expansion/ACCUMULATOR/TWO_PARTICLE \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_expansion/TOOLS \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_expansion/TOOLS/BIT \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_expansion/STRUCTURES \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_full_expansion \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_full_expansion/SYMMETRIES \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_full_expansion/SINGLET_STRUCTURE \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_full_expansion/SINGLET_STRUCTURE/STRUCTURES \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_full_expansion/SINGLET_STRUCTURE/TOOLS \
	-I$(SRC_DIR)/MonteCarloIntegrator/hybridization_full_expansion/SINGLET_STRUCTURE/STRUCTURES/AVL_STRUCTURES \
	-I$(SRC_DIR)/DCA_calculation \
	-I$(SRC_DIR)/DCA_calculation/transform_to \
	-I$(SRC_DIR)/phys_library/DCA+_analysis \
	-I$(SRC_DIR)/phys_library/DCA+_analysis/TOOLS \
	-I$(SRC_DIR)/phys_library/DCA+_analysis_test \

INCLUDE_GPU_CODE =  -I. \
        -I$(SRC_DIR)/comp_library/LIN_ALG \
        -I$(SRC_DIR)/comp_library/LIN_ALG/src \
        -I$(SRC_DIR)/comp_library/LIN_ALG/src/linalg_operations \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker/ctaux_walker_tools/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker/ctaux_walker_tools/ctaux_shrink_routines/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker/ctaux_walker_tools/ctaux_N_matrix_routines/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker/ctaux_walker_tools/ctaux_G_matrix_routines/ \
	-I$(SRC_DIR)/phys_library/DCA+_step/cluster_solver/cluster_solver_mc_ctaux/ctaux_walker/ctaux_walker_tools/ctaux_G0_matrix_routines/ \
        -I$(MAGMA_ROOT_DIR) \
        -I$(MAGMA_ROOT_DIR)/include \
        -L$(MAGMA_ROOT_DIR)/lib \
	-L$(MAGMA_ROOT_DIR)/../cblas/lib

# INCLUDE_GPU_CODE =  -I. \
#         -I$(SRC_DIR)/LIN_ALG \
#         -I$(SRC_DIR)/LIN_ALG/src \
#         -I$(SRC_DIR)/LIN_ALG/src/linalg_operations \
# 	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/TOOLS/N_MATRIX_TOOLS \
# 	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/TOOLS/G_MATRIX_TOOLS \
#         -I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/TOOLS/G0_INTERPOLATION \
#         -I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/TOOLS/GAMMA_MATRIX_TOOLS \
# 	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/TOOLS/SHRINK_TOOLS \
# 	-I$(SRC_DIR)/MonteCarloIntegrator/continuous_time_auxilary_field_expansion/CT_AUX_walker_TOOLS \
#         -I$(MAGMA_ROOT_DIR) \
#         -I$(MAGMA_ROOT_DIR)/include \
#         -L$(MAGMA_ROOT_DIR)/lib \
# 	-L$(MAGMA_ROOT_DIR)/../cblas/lib


CC   = COMPILER_C++
NVCC = GPU_COMPILER

CLANGCC   = /opt/local/bin/clang-mp-3.4
CLANGCPPC = /opt/local/bin/clang++-mp-3.4

GCC = /opt/local/bin/gcc-mp-4.8
GPP = /opt/local/bin/g++-mp-4.8

FLAGS_ANA    = FLAGOPTIONS

FLAGS      = FLAGOPTIONS
FLAGS_NVCC = FLAGOPTIONS_GPU

LIBS     = LIBRARIES
LIBS_GPU = LIBRARIES_GPU

all: PROG_NAME

showEnv:
	@echo 
	@echo ------------------------------------------------ Compiler Version
	$(CC) --version	
	@echo ----------------------------------------------------------------
	@echo

showEnv_GPU:
	@echo 
	@echo ------------------------------------------------ Compiler Version
	$(NVCC) --version	
	@echo ----------------------------------------------------------------
	@echo

show_DCA:
	@echo "__/\\\\\\\\\\\\\\\\\\\\\\\\___________/\\\\\\\\\\\\\\\\\\_____/\\\\\\\\\\\\\\\\\\__________________"        
	@echo " _\\/\\\\\\////////\\\\\\______/\\\\\\////////____/\\\\\\\\\\\\\\\\\\\\\\\\\\________________"       
	@echo "  _\\/\\\\\\______\\//\\\\\\___/\\\\\\/____________/\\\\\\/////////\\\\\\______/\\\\\\_____"      
	@echo "   _\\/\\\\\\_______\\/\\\\\\__/\\\\\\_____________\\/\\\\\\_______\\/\\\\\\_____\\/\\\\\\_____"     
	@echo "    _\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\_____________\\/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\__/\\\\\\\\\\\\\\\\\\\\\\_"    
	@echo "     _\\/\\\\\\_______\\/\\\\\\_\\//\\\\\\____________\\/\\\\\\/////////\\\\\\_\\/////\\\\\\///__"   
	@echo "      _\\/\\\\\\_______/\\\\\\___\\///\\\\\\__________\\/\\\\\\_______\\/\\\\\\_____\\/\\\\\\_____"  
	@echo "       _\\/\\\\\\\\\\\\\\\\\\\\\\\\/______\\////\\\\\\\\\\\\\\\\\\_\\/\\\\\\_______\\/\\\\\\_____\\///______" 
	@echo "        _\\////////////___________\\/////////__\\///________\\///________________"


show_analysis:
	@echo "_____/\\\\\\\\\\\\\\\\\\_____/\\\\\\\\\\_____/\\\\\\_____/\\\\\\\\\\\\\\\\\\_____/\\\\\\______________/\\\\\\________/\\\\\\_____/\\\\\\\\\\\\\\\\\\\\\\____/\\\\\\\\\\\\\\\\\\\\\\_____/\\\\\\\\\\\\\\\\\\\\\\___        "
	@echo " ___/\\\\\\\\\\\\\\\\\\\\\\\\\\__\\/\\\\\\\\\\\\___\\/\\\\\\___/\\\\\\\\\\\\\\\\\\\\\\\\\\__\\/\\\\\\_____________\\///\\\\\\____/\\\\\\/____/\\\\\\/////////\\\\\\_\\/////\\\\\\///____/\\\\\\/////////\\\\\\_       "
	@echo "  __/\\\\\\/////////\\\\\\_\\/\\\\\\/\\\\\\__\\/\\\\\\__/\\\\\\/////////\\\\\\_\\/\\\\\\_______________\\///\\\\\\/\\\\\\/_____\\//\\\\\\______\\///______\\/\\\\\\______\\//\\\\\\______\\///__      "
	@echo "   _\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\//\\\\\\_\\/\\\\\\_\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\_________________\\///\\\\\\/________\\////\\\\\\_____________\\/\\\\\\_______\\////\\\\\\_________     "
	@echo "    _\\/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\_\\/\\\\\\\\//\\\\\\\\/\\\\\\_\\/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\_\\/\\\\\\___________________\\/\\\\\\____________\\////\\\\\\__________\\/\\\\\\__________\\////\\\\\\______    "
	@echo "     _\\/\\\\\\/////////\\\\\\_\\/\\\\\\_\\//\\\\\\/\\\\\\_\\/\\\\\\/////////\\\\\\_\\/\\\\\\___________________\\/\\\\\\_______________\\////\\\\\\_______\\/\\\\\\_____________\\////\\\\\\___   "
	@echo "      _\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\__\\//\\\\\\\\\\\\_\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\___________________\\/\\\\\\________/\\\\\\______\\//\\\\\\______\\/\\\\\\______/\\\\\\______\\//\\\\\\__  "
	@echo "       _\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\___\\//\\\\\\\\\\_\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\_______\\/\\\\\\_______\\///\\\\\\\\\\\\\\\\\\\\\\/____/\\\\\\\\\\\\\\\\\\\\\\_\\///\\\\\\\\\\\\\\\\\\\\\\/___ "
	@echo "        _\\///________\\///__\\///_____\\/////__\\///________\\///__\\///////////////________\\///__________\\///////////_____\\///////////____\///////////_____"

show_check:
	@echo "________/\\\\\\\\\\\\\\\\\\__/\\\\\\________/\\\\\\__/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\________/\\\\\\\\\\\\\\\\\\__/\\\\\\________/\\\\\\_        "
	@echo " _____/\\\\\\////////__\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\///////////______/\\\\\\////////__\\/\\\\\\_____/\\\\\\//__       "
	@echo "  ___/\\\\\\/___________\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\_______________/\\\\\\/___________\\/\\\\\\__/\\\\\\//_____      "
	@echo "   __/\\\\\\_____________\\/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\_\\/\\\\\\\\\\\\\\\\\\\\\\______/\\\\\\_____________\\/\\\\\\\\\\\\//\\\\\\_____     "
	@echo "    _\\/\\\\\\_____________\\/\\\\\\/////////\\\\\\_\\/\\\\\\///////______\\/\\\\\\_____________\\/\\\\\\//_\\//\\\\\\____    "
	@echo "     _\\//\\\\\\____________\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\_____________\\//\\\\\\____________\\/\\\\\\____\\//\\\\\\___   "
	@echo "      __\\///\\\\\\__________\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\______________\\///\\\\\\__________\\/\\\\\\_____\\//\\\\\\__  "
	@echo "       ____\\////\\\\\\\\\\\\\\\\\\_\\/\\\\\\_______\\/\\\\\\_\\/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\____\\////\\\\\\\\\\\\\\\\\\_\\/\\\\\\______\\//\\\\\\_ "
	@echo "        _______\\/////////__\\///________\\///__\\///////////////________\\/////////__\\///________\\///__"

GPU_code.o: showEnv_GPU include_files_GPU.cu
	    time $(NVCC) $(INCLUDE_GPU_CODE) $(FLAGS_NVCC) -c include_files_GPU.cu

main.o: showEnv main.cpp
	time $(CC) $(INCLUDES) $(FLAGS) -c main.cpp

dca_cpu: show_DCA clean main.o
	 time $(CC) $(INCLUDES) $(FLAGS) main.o -o dca_cpu $(LIBS)

main_gpu.o: showEnv main.cpp
	    time $(CC) $(INCLUDES) $(INCLUDE_GPU_CODE) $(FLAGS) -c main.cpp

dca_gpu: show_DCA clean GPU_code.o main_gpu.o
	 time $(CC) $(INCLUDES) $(INCLUDE_GPU_CODE) $(FLAGS) main.o include_files_GPU.o -o dca_gpu $(LIBS) $(LIBS_GPU)

analysis_cpu.o: showEnv analysis.cpp
	time $(CC) $(INCLUDES) $(FLAGS_ANA) -c analysis.cpp

analysis_cpu: show_analysis cleananalysis analysis_cpu.o
	time $(CC) $(INCLUDES) $(FLAGS_ANA) analysis.o -o analysis_cpu $(LIBS)

analysis_gpu.o: showEnv analysis.cpp
		time $(CC) $(INCLUDES) $(INCLUDE_GPU_CODE) $(FLAGS_ANA) -c analysis.cpp

analysis_gpu: show_analysis cleananalysis GPU_code.o analysis_gpu.o
	      time $(CC) $(INCLUDES) $(INCLUDE_GPU_CODE) $(FLAGS_ANA) analysis.o include_files_GPU.o -o analysis_gpu $(LIBS) $(LIBS_GPU)

check_cpu.o: showEnv check.cpp
	time $(CC) $(INCLUDES) $(FLAGS) -c check.cpp

check_cpu: show_check cleancheck check_cpu.o
	time $(CC) $(INCLUDES) $(FLAGS) check.o -o check_cpu $(LIBS)

check_gpu.o: showEnv check.cpp
	time $(CC) $(INCLUDES) $(INCLUDE_GPU_CODE) $(FLAGS) -c check.cpp

check_gpu: show_check cleancheck GPU_code.o check_gpu.o
	time $(CC) $(INCLUDES) $(INCLUDE_GPU_CODE) $(FLAGS) check.o include_files_GPU.o -o check_gpu $(LIBS) $(LIBS_GPU)

LOAD:
	module load fftw
	module load hdf5
	module load cudatoolkit
	module swap PrgEnv-cray PrgEnv-gnu

FFTW:
	rm -rf `pwd`/$(FFTW___DIR)
	tar -xvf    $(LIBS___DIR)/fftw-3.3.3.tar
	mv  `pwd`/fftw-3.3.3 `pwd`/$(LIBS___DIR)/fftw-3.3.3
	mkdir `pwd`/$(FFTW___DIR)/build
	cd `pwd`/$(FFTW___DIR); ./configure OPTIONS_FFTW #--prefix=`pwd`/build --enable-cxx CC=$(CC) CXX=$(CPPC)
	cd `pwd`/$(FFTW___DIR); make -j 8
	cd `pwd`/$(FFTW___DIR); make install

NFFT:
	rm -rf `pwd`/$(NFFT___DIR)
	tar -xvf  $(LIBS___DIR)/nfft-3.1.3.tar
	mv  `pwd`/nfft-3.1.3 `pwd`/$(NFFT___DIR)
	mkdir `pwd`/$(NFFT___DIR)/build
	cd `pwd`/$(NFFT___DIR); ./configure OPTIONS_NFFT #--prefix=`pwd`/build --with-fftw3=`pwd`/../fftw-3.3.3/build --without-apple-gcc-arch
	cd `pwd`/$(NFFT___DIR); make -j 8
	cd `pwd`/$(NFFT___DIR); make install

SPGLIB:
	rm -rf `pwd`/$(SPGLIB_DIR)
	tar -xvf    $(LIBS___DIR)/spglib-1.4.1.tar
	mv  `pwd`/spglib-1.4.1 `pwd`/$(SPGLIB_DIR)
	mkdir `pwd`/$(SPGLIB_DIR)/build
	cd `pwd`/$(SPGLIB_DIR); ./configure OPTIONS_SPGLIB #--prefix=`pwd`/build  --enable-cxx CC=$(GCC) CXX=$(GPP)
	cd `pwd`/$(SPGLIB_DIR); make -j 8
	cd `pwd`/$(SPGLIB_DIR); make install

HDF5:
	rm -rf `pwd`/$(HDF5___DIR)
	tar -xvf    $(LIBS___DIR)/hdf5-1.8.11.tar
	mv  `pwd`/hdf5-1.8.11 `pwd`/$(HDF5___DIR)
	mkdir `pwd`/$(HDF5___DIR)/build
	cd `pwd`/$(HDF5___DIR); ./configure OPTIONS_HDF5 
	cd `pwd`/$(HDF5___DIR); make -j 8
	cd `pwd`/$(HDF5___DIR); make install

MPICH:
	rm -rf `pwd`/$(MPICH__DIR)
	tar -xvf    $(LIBS___DIR)/mpich-3.0.4.tar
	mv  `pwd`/mpich-3.0.4 `pwd`/$(LIBS___DIR)/
	mkdir `pwd`/$(MPICH__DIR)/build
	cd `pwd`/$(MPICH__DIR); ./configure OPTIONS_MPICH 
	cd `pwd`/$(MPICH__DIR); make -j 8
	cd `pwd`/$(MPICH__DIR); make install

clean:
	rm -f dca_cpu dca_gpu main.o

cleananalysis:
	rm -f analysis_cpu analysis_gpu analysis.o

cleancheck:
	rm -f check check.o

